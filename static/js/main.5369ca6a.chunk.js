(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(43)},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(17),c=n.n(i),o=n(10),s=n(8),u="INIT_GAME",l="PLAY_GAME",m="END_GAME";function p(e){return{type:l,coord:e}}var f=function(e,t,n){var a=e.x,r=e.y,i=0;return(i=function e(t,n,a,r,i){if(r[t+1]&&r[t+1][n]&&"none"!==r[t+1][n].piece&&r[t+1][n].piece===a)return e(t+1,n,a,r,++i);return i}(a,r,t,n,i=function e(t,n,a,r,i){if(r[t-1]&&r[t-1][n]&&"none"!==r[t-1][n].piece&&r[t-1][n].piece===a)return e(t-1,n,a,r,++i);return i}(a,r,t,n,i)))>=4||((i=function e(t,n,a,r,i){if(r[t+1]&&r[t+1][n+1]&&"none"!==r[t+1][n+1]&&r[t+1][n+1].piece===a)return e(t+1,n+1,a,r,++i);return i}(a,r,t,n,i=function e(t,n,a,r,i){if(r[t-1]&&r[t-1][n-1]&&"none"!==r[t-1][n-1]&&r[t-1][n-1].piece===a)return e(t-1,n-1,a,r,++i);return i}(a,r,t,n,i=0)))>=4||((i=function e(t,n,a,r,i){if(r[t]&&r[t][n+1]&&"none"!==r[t][n+1]&&r[t][n+1].piece===a)return e(t,n+1,a,r,++i);return i}(a,r,t,n,i=function e(t,n,a,r,i){if(r[t]&&r[t][n-1]&&"none"!==r[t][n-1]&&r[t][n-1].piece===a)return e(t,n-1,a,r,++i);return i}(a,r,t,n,i=0)))>=4||(i=function e(t,n,a,r,i){if(r[t-1]&&r[t-1][n+1]&&"none"!==r[t-1][n+1]&&r[t-1][n+1].piece===a)return e(t-1,n+1,a,r,++i);return i}(a,r,t,n,i=function e(t,n,a,r,i){if(r[t+1]&&r[t+1][n-1]&&"none"!==r[t+1][n-1]&&r[t+1][n-1].piece===a)return e(t+1,n-1,a,r,++i);return i}(a,r,t,n,i=0)))>=4))};var v={listArray:h(),activeUser:"black",mode:"pve",first:"human",winner:"",gameOver:!1};function h(){for(var e=new Array(0),t=0;t<19;t++){for(var n=new Array(0),a=0;a<19;a++){n.push({piece:"none"})}e.push(n)}return e}var d=Object(o.b)({gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,n=JSON.parse(JSON.stringify(e));switch(t.type){case u:return n=function(e,t){return e.mode=t.mode,e.first=t.first,e.activeUser="black",e.listArray=h(),e.gameOver=!1,e.winner="",e}(n,t.nextStatus);case l:var a=function(e,t){return{gameOver:f({x:t.x,y:t.y},e.activeUser,e.listArray),winner:e.activeUser}}(n,t.coord);return a.gameOver&&(n.gameOver=a.gameOver,n.winner=a.winner),n=function(e,t){var n=t.x,a=t.y;return e.listArray[n][a].piece=e.activeUser,e.activeUser="black"===e.activeUser?"white":"black",e}(n,t.coord);case m:return n.gameOver=!0,n;default:return e}}}),b=n(1),O=n(2),E=n(5),y=n(3),k=n(7),j=n(4),N=(n(36),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e))).state={countNum:60,count:60,countId:0},n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"counting",value:function(){var e=this;if(this.props.gameOver)this.setState({count:this.state.countNum});else{this.state.count<=0&&this.props.dispatch({type:m});var t=setTimeout(function(){var t=e.state.count-1;e.setState({count:t}),e.counting()},1e3);this.setState({countId:t})}}},{key:"componentDidUpdate",value:function(e){e.activeUser===this.props.activeUser&&e.mode===this.props.mode||(clearTimeout(this.state.countId),this.setState({count:this.state.countNum}),this.counting())}},{key:"render",value:function(){var e,t=this.props,n="black"===t.activeUser?"\u9ed1\u65b9":"\u767d\u65b9";return e=t.gameOver?r.a.createElement("span",null):r.a.createElement("div",{className:this.state.count<=10?"danger":""},r.a.createElement("span",null,n),"\u8bfb\u79d2\uff1a",r.a.createElement("span",null,this.state.count),"\u79d2"),r.a.createElement("div",{className:"toolbar"},r.a.createElement("h1",null,"Gomoku"),e,r.a.createElement("div",{className:"tools"},r.a.createElement("h3",null,"Made by classlfz")))}}]),t}(r.a.Component));var g=Object(s.b)(function(e){return{activeUser:e.gameState.activeUser,mode:e.gameState.mode,gameOver:e.gameState.gameOver}})(N),C=(n(37),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e))).handleClick=n.handleClick.bind(Object(k.a)(n)),n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"handleClick",value:function(e){"none"===this.props.piece&&(this.props.onClick({x:this.props.listNumber,y:this.props.sequenceNumber}),e.preventDefault())}},{key:"handleItemClassName",value:function(e,t){return 0===e&&0===t?"itemLeftTop":18===e&&0===t?"itemRightTop":18===e&&18===t?"itemRightBottom":0===e&&18===t?"itemLeftBottom":0===t?"itemTop":18===e?"itemRight":18===t?"itemBottom":0===e?"itemLeft":9===e&&9===t||3===e&&(3===t||9===t||15===t)||3===t&&(3===e||9===e||15===e)||15===e&&(9===t||15===t)||9===e&&15===t?"itemPoint":"itemNormal"}},{key:"render",value:function(){var e,t=this.props.piece,n=this.props.listNumber,a=this.props.sequenceNumber,i=null;return e=this.handleItemClassName(n,a),i="none"===t?"spanNone":"black"===t?"spanBlack":"spanWhite",r.a.createElement("div",{onClick:this.handleClick,className:e},r.a.createElement("div",{className:i}))}}]),t}(r.a.Component)),w=(n(38),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e))).handleClick=n.handleClick.bind(Object(k.a)(n)),n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"handleClick",value:function(e){this.props.onClick(e)}},{key:"render",value:function(){var e=this,t=this.props.list.map(function(t,n){return r.a.createElement("div",{key:n,className:"list"},r.a.createElement(C,{piece:t.piece,listNumber:e.props.listNumber,sequenceNumber:n,onClick:e.handleClick}))});return r.a.createElement("div",null,t)}}]),t}(r.a.Component)),S=(n(39),function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){if("pvp"===this.props.mode){var e="black"===this.props.activeUser?"black":"white";return r.a.createElement("div",{className:"statusBar"},r.a.createElement("h3",null,"\u65e0\u7981\u624b"),r.a.createElement("div",{className:"players"},"\u4e0b\u68cb\u65b9\uff1a",r.a.createElement("div",{className:e})))}var t="human"===this.props.first?"black":"white",n="computer"===this.props.first?"black":"white";return r.a.createElement("div",{className:"statusBar"},r.a.createElement("h3",null,"\u65e0\u7981\u624b"),r.a.createElement("div",{className:"players"},"\u73a9\u5bb6\uff1a",r.a.createElement("div",{className:t}),"\u7535\u8111\uff1a",r.a.createElement("div",{className:n})))}}]),t}(r.a.Component)),U=(n(40),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e))).restart=n.restart.bind(Object(k.a)(n)),n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"restart",value:function(e){var t=this.refs.modeSelect.value,n=this.refs.firstSelect.value;this.props.onRestart({mode:t,first:n}),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",{className:"toolsBar"},r.a.createElement("div",null,r.a.createElement("h3",null,"\u6a21\u5f0f\uff1a"),r.a.createElement("select",{ref:"modeSelect",className:"select"},r.a.createElement("option",{value:"pve"},"\u4eba\u673a\u5bf9\u6218"),r.a.createElement("option",{value:"pvp"},"\u53cc\u4eba\u5bf9\u6218"))),r.a.createElement("div",null,r.a.createElement("h3",null,"\u5148\u624b\uff1a"),r.a.createElement("select",{ref:"firstSelect",className:"select"},r.a.createElement("option",{value:"human"},"\u73a9\u5bb6\u5148\u884c"),r.a.createElement("option",{value:"computer"},"\u7535\u8111\u5148\u884c"))),r.a.createElement("button",{className:"btn",onClick:this.restart},"\u5f00\u59cb\u6e38\u620f"))}}]),t}(r.a.Component)),A=(n(41),function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return this.props.gameOver?r.a.createElement("div",{className:"notificationWrapper"},r.a.createElement("div",{className:"notificationBg"}),r.a.createElement("div",{className:"notificationContent"},r.a.createElement("h1",null,"\u6e38\u620f\u7ed3\u675f!"),r.a.createElement("h3",null,"\u80dc\u5229\u65b9\u4e3a\uff1a","black"===this.props.winner?"\u6267\u9ed1\u65b9":"\u6267\u767d\u65b9"))):r.a.createElement("div",{styles:"display: none;"})}}]),t}(r.a.Component));n(42);function x(e,t,n,a){for(var r=0,i=[r=function e(t,n,a,r,i){r[t+1]&&r[t+1][n]||i--;if(r[t+1]&&r[t+1][n]&&"none"!==r[t+1][n].piece){if(r[t+1][n].piece===a)return i++,e(t+1,n,a,r,++i);"none"===r[t+1][n].piece&&i++}return i}(e,t,n,a,r=function e(t,n,a,r,i){r[t-1]&&r[t-1][n]||i--;if(r[t-1]&&r[t-1][n]&&"none"!==r[t-1][n].piece){if(r[t-1][n].piece===a)return i++,e(t-1,n,a,r,++i);"none"===r[t-1][n].piece&&i++}return i}(e,t,n,a,r)),r=function e(t,n,a,r,i){r[t+1]&&r[t+1][n+1]||i--;if(r[t+1]&&r[t+1][n+1]&&"none"!==r[t+1][n+1]){if(r[t+1][n+1].piece===a)return i++,e(t+1,n+1,a,r,++i);"none"===r[t+1][n+1].piece&&i++}return i}(e,t,n,a,r=function e(t,n,a,r,i){r[t-1]&&r[t-1][n-1]||i--;if(r[t-1]&&r[t-1][n-1]&&"none"!==r[t-1][n-1]){if(r[t-1][n-1].piece===a)return i++,e(t-1,n-1,a,r,++i);"none"===r[t-1][n-1].piece&&i++}return i}(e,t,n,a,r=0)),r=function e(t,n,a,r,i){r[t]&&r[t][n+1]||i--;if(r[t]&&r[t][n+1]&&"none"!==r[t][n+1]){if(r[t][n+1].piece===a)return i++,e(t,n+1,a,r,++i);"none"===r[t][n+1].piece&&i++}return i}(e,t,n,a,r=function e(t,n,a,r,i){r[t]&&r[t][n-1]||i--;if(r[t]&&r[t][n-1]&&"none"!==r[t][n-1]){if(r[t][n-1].piece===a)return i++,e(t,n-1,a,r,++i);"none"===r[t][n-1].piece&&i++}return i}(e,t,n,a,r=0)),r=function e(t,n,a,r,i){r[t-1]&&r[t-1][n+1]||i--;if(r[t-1]&&r[t-1][n+1]&&"none"!==r[t-1][n+1]){if(r[t-1][n+1].piece===a)return i++,e(t-1,n+1,a,r,++i);"none"===r[t-1][n+1].piece&&i++}return i}(e,t,n,a,r=function e(t,n,a,r,i){r[t+1]&&r[t+1][n-1]||i--;if(r[t+1]&&r[t+1][n-1]&&"none"!==r[t+1][n-1]){if(r[t+1][n-1].piece===a)return i++,e(t+1,n-1,a,r,++i);"none"===r[t+1][n-1].piece&&i++}return i}(e,t,n,a,r=0))],c=0,o=1,s=0,u=i;s<u.length;s++){var l=u[s];l>c?(c=l,o=1):l===c&&o++}return{countTop:c,countRepeat:o,countArr:i}}var B=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e))).play=n.play.bind(Object(k.a)(n)),n}return Object(j.a)(t,e),Object(O.a)(t,[{key:"play",value:function(e){return(0,this.props.dispatch)(p(e))}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.dispatch,n=e.gameState,a=n.mode,r=n.first,i=n.activeUser,c=n.listArray;if("pvp"!==a&&(("human"===r&&"white"===i||"computer"===r&&"black"===i)&&!n.gameOver))return t(p(function(e,t){for(var n=0,a=0;a<e.length;a++)for(var r=0;r<e[a].length;r++)if("none"===e[a][r].piece){n++,e[a][r].attackCounts=x(a,r,t,e);var i="black"===t?"white":"black";e[a][r].defendCounts=x(a,r,i,e)}if(361===n)return{x:9,y:9};for(var c=0,o=0,s=0,u=0,l=0,m=0;m<e.length;m++)for(var p=0;p<e[m].length;p++)if("none"===e[m][p].piece){var f=e[m][p].attackCounts.countTop,v=e[m][p].attackCounts.countRepeat,h=e[m][p].attackCounts.countArr,d=e[m][p].defendCounts.countTop,b=e[m][p].defendCounts.countRepeat;if(f>c&&(c=f,o=v,u=m,l=p),f===c&&v>o&&(c=f,o=v,u=m,l=p),d>c&&(c=d,o=b,u=m,l=p),d===c&&b>o&&(c=d,o=b,u=m,l=p),d===c&&b===o){var O=0,E=!0,y=!1,k=void 0;try{for(var j,N=h[Symbol.iterator]();!(E=(j=N.next()).done);E=!0)O+=j.value}catch(g){y=!0,k=g}finally{try{E||null==N.return||N.return()}finally{if(y)throw k}}O>s&&(s=O,u=m,l=p)}}return{x:u,y:l}}(c,i)))}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.gameState,i=a.listArray.map(function(t,n){return r.a.createElement("div",{key:n},r.a.createElement(w,{list:t,onClick:function(t){return e.play(t)},listNumber:n}))});return r.a.createElement("div",{className:"container"},r.a.createElement(g,{activeUser:a.activeUser}),r.a.createElement("div",{className:"main"},r.a.createElement(S,{mode:a.mode,first:a.first,activeUser:a.activeUser}),r.a.createElement("div",{className:"chessboard"},r.a.createElement(A,{gameOver:a.gameOver,winner:a.winner}),i),r.a.createElement(U,{onRestart:function(e){return n(function(e){return{type:u,nextStatus:e}}(e))}})))}}]),t}(a.Component);var T=Object(s.b)(function(e){return{gameState:e.gameState}})(B),I=Object(o.c)(d);c.a.render(r.a.createElement(s.a,{store:I},r.a.createElement(T,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.5369ca6a.chunk.js.map